global:
  stackName: aws-infra-forge
  dualStack: true
  description: 'High-Performance DPDK and Pktgen Deployment: Automated provisioning of DPDK-optimized instances with multi-ENI configuration, cluster placement groups, and network performance tuning. Supports batch deployments for distributed packet generation and network testing scenarios. Includes automatic source/destination check management, DPDK driver binding, and pktgen installation with configurable versions.'
enabledForges:
  - dpdk
forges:
  vpc:
    defaults:
      id: vpc
      type: VPC
      cidrBlock: 10.69.0.0/16
      natGatewayPerAZ: false
  ec2:
    defaults:
      type: EC2
      security: private
      subnet: private
      azIndex: 2
      debug: false
      instanceType: c7g.xlarge
      instanceCount: 1
      keyName: aws-infra-forge
      detailedMonitoring: false
      ebsVolumeType: gp3
      ebsSize: "30"
      ebsThroughput: "125"
      ebsIops: "3000"
      ebsOptimized: false
      enclaveEnabled: false
      networkCardCount: 1
      eniCount: 1
      purchaseOption: od
      spotMaxPrice: ""
      capacityBlockId: ""
      enableEfa: false
      enaSrdEnabled: false
      osArch: aarch64
      osName: amazon
      osType: linux
      osVersion: "2023"
      policies: AmazonS3FullAccess,AmazonSSMManagedInstanceCore
      s3Location: s3://aws-infra-forge
      allowedPorts: 22@0.0.0.0/0;80,443,8443@10.69.0.0/16
      allowedPortsIpv6: 22,80,443,8443@::/0
      requireImdsv2: true
      userDataScriptPath: ""
      userDataToken: sysinfo
    instances:
      - id: dpdk
        instanceType: c7g.4xlarge
        instanceCount: 2
        storeInstanceInfo: true
        ebsSize: "500"
        azIndex: 1
        ebsThroughput: "500"
        placementGroup: cpg
        placementGroupStrategy: CLUSTER
        eniCount: 2
        ebsIops: "6000"
        userDataToken: dpdk:dpdk_version=24.11.3;pktgen_version=25.07.1
